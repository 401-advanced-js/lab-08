<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: categories.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: categories.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';

const uuid = require('uuid/v4');

const schema = {
  name: {required:true},
  id: {required:true},
};

class Categories {

  /**
 * Instantiates the 'database'
 * @constructor
 */
  constructor() {
    this.database = [];
  }
  /**
 * The get request method for our API
 * @param {*} _id 
 * @returns database entry or database entries
 */
  get(_id) {
    return _id
      ? this.database.filter(record => record.id === _id)[0]
      : this.database;
  }
  /**
   * Posts to db
   * @param {*} record
   * @returns record, or null 
   */
  post(record) {
    record.id = uuid();
    if(this.validate(record)){
      this.database.push(record);
      return record;
    }
    else{
      return null;
    }

  }
  /**
 * updates an existing record
 * @param {*} _id 
 * @param {*} record 
 */
  put(_id, record) {
    if(this.validate(record)){
      this.database.forEach(entry => {
        if(_id === entry.id){
          entry = record;
        }
      });
    }
    else{
      return null;
    }
  }
  /**
 * deletes a specified entry
 * @param {*} _id 
 */
  delete(_id) {
    let loop = this.database.length;
    for(let i = 0; i &lt; loop; i++){
      if(this.database[i].id === _id){
        this.database.splice(i,1);
      }
    }
    return {};
  }
  
  /**
   * Validates the input record if it fits schema
   * @param {} entry
   * @returns boolean
   */
  validate(entry) {  //Taken from the one and only madman's code, John Cokos

    let valid = true;
    let record = {};

    Object.keys(schema).forEach( field => {
      if ( schema[field].required ) {
        if (entry[field]) {
          record[field] = entry[field];
        } else {
          valid = false;
        }
      }
      else {
        record[field] = entry[field];
      }
    });

    return valid ? record : undefined;

  }
}



module.exports = Categories;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Categories.html">Categories</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Wed Mar 27 2019 22:20:34 GMT-0700 (Pacific Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
